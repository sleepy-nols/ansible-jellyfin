#
# {{ ansible_managed }}
#

# Program directories
JELLYFIN_DATA_DIR="{{ jellyfin_data_dir }}"
JELLYFIN_CONFIG_DIR="{{ jellyfin_config_dir }}"
JELLYFIN_LOG_DIR="{{ jellyfin_log_dir }}"
JELLYFIN_CACHE_DIR="{{ jellyfin_cache_dir }}"

# web client path, installed by the jellyfin-web package
JELLYFIN_WEB_OPT="--webdir={{ jellyfin_web_bin }}"

# Restart script for in-app server control
JELLYFIN_RESTART_OPT="--restartpath={{ jellyfin_restart_bin }}"

# ffmpeg binary paths, overriding the system values
JELLYFIN_FFMPEG_OPT="--ffmpeg={{ jellyfin_ffmpeg_bin }}"

# Disable glibc dynamic heap adjustment
MALLOC_TRIM_THRESHOLD_={{ jellyfin_malloc_trim_threshold | int }}

# [OPTIONAL] run Jellyfin as a headless service
{% if jellyfin_service is defined %}
JELLYFIN_SERVICE_OPT="{% if jellyfin_service | bool %}--service{% endif %}"
{% endif %}

# [OPTIONAL] run Jellyfin without the web app
{% if jellyfin_nowebapp is defined %}
JELLYFIN_NOWEBAPP_OPT="{% if jellyfin_nowebapp | bool %}--nowebclient{% endif %}"
{% endif %}

# Space to add additional command line options to jellyfin (for help see ~$ jellyfin --help)
JELLYFIN_ADDITIONAL_OPTS="{{ jellyfin_additional_opts }}"


COMPlus_gcServer={{ jellyfin_complus_gcserver | int }}

